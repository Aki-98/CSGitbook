# è®¾è®¡æ¨¡å¼çš„ä¸‰ä¸ªåˆ†ç±»

![image-20220311082814907](ã€è®¾è®¡æ¨¡å¼-å¯å¤ç”¨é¢å‘å¯¹è±¡è½¯ä»¶çš„åŸºç¡€ã€‘é˜…è¯»ç¬”è®°_imgs\lTi0V8TSRGy.png)

**åˆ›å»ºå‹æ¨¡å¼**

- å•ä¾‹æ¨¡å¼ï¼šæŸä¸ªç±»åªèƒ½æœ‰ä¸€ä¸ªå®ä¾‹ï¼Œæä¾›ä¸€ä¸ªå…¨å±€çš„è®¿é—®ç‚¹ã€‚
- ç®€å•å·¥å‚ï¼šä¸€ä¸ªå·¥å‚ç±»æ ¹æ®ä¼ å…¥çš„å‚é‡å†³å®šåˆ›å»ºå‡ºé‚£ä¸€ç§äº§å“ç±»çš„å®ä¾‹ã€‚
- å·¥å‚æ–¹æ³•ï¼šå®šä¹‰ä¸€ä¸ªåˆ›å»ºå¯¹è±¡çš„æ¥å£ï¼Œè®©å­ç±»å†³å®šå®ä¾‹åŒ–é‚£ä¸ªç±»ã€‚
- æŠ½è±¡å·¥å‚ï¼šåˆ›å»ºç›¸å…³æˆ–ä¾èµ–å¯¹è±¡çš„å®¶æ—ï¼Œè€Œæ— éœ€æ˜ç¡®æŒ‡å®šå…·ä½“ç±»ã€‚
- å»ºé€ è€…æ¨¡å¼ï¼šå°è£…ä¸€ä¸ªå¤æ‚å¯¹è±¡çš„æ„å»ºè¿‡ç¨‹ï¼Œå¹¶å¯ä»¥æŒ‰æ­¥éª¤æ„é€ ã€‚
- åŸå‹æ¨¡å¼ï¼šé€šè¿‡å¤åˆ¶ç°æœ‰çš„å®ä¾‹æ¥åˆ›å»ºæ–°çš„å®ä¾‹ã€‚

**ç»“æ„æ€§æ¨¡å¼**

- é€‚é…å™¨æ¨¡å¼ï¼šå°†ä¸€ä¸ªç±»çš„æ–¹æ³•æ¥å£è½¬æ¢æˆå®¢æˆ·å¸Œæœ›çš„å¦å¤–ä¸€ä¸ªæ¥å£ã€‚
- ç»„åˆæ¨¡å¼ï¼šå°†å¯¹è±¡ç»„åˆæˆæ ‘å½¢ç»“æ„ä»¥è¡¨ç¤ºâ€œéƒ¨åˆ†-æ•´ä½“â€çš„å±‚æ¬¡ç»“æ„ã€‚
- è£…é¥°æ¨¡å¼ï¼šåŠ¨æ€çš„ç»™å¯¹è±¡æ·»åŠ æ–°çš„åŠŸèƒ½ã€‚
- ä»£ç†æ¨¡å¼ï¼šä¸ºå…¶ä»–å¯¹è±¡æä¾›ä¸€ä¸ªä»£ç†ä»¥ä¾¿æ§åˆ¶è¿™ä¸ªå¯¹è±¡çš„è®¿é—®ã€‚
- äº¨å…ƒï¼ˆè‡é‡ï¼‰æ¨¡å¼ï¼šé€šè¿‡å…±äº«æŠ€æœ¯æ¥æœ‰æ•ˆçš„æ”¯æŒå¤§é‡ç»†ç²’åº¦çš„å¯¹è±¡ã€‚
- å¤–è§‚æ¨¡å¼ï¼šå¯¹å¤–æä¾›ä¸€ä¸ªç»Ÿä¸€çš„æ–¹æ³•ï¼Œæ¥è®¿é—®å­ç³»ç»Ÿä¸­çš„ä¸€ç¾¤æ¥å£ã€‚
- æ¡¥æ¥æ¨¡å¼ï¼šå°†æŠ½è±¡éƒ¨åˆ†å’Œå®ƒçš„å®ç°éƒ¨åˆ†åˆ†ç¦»ï¼Œä½¿å®ƒä»¬éƒ½å¯ä»¥ç‹¬ç«‹çš„å˜åŒ–ã€‚

**è¡Œä¸ºå‹æ¨¡å¼**

- æ¨¡æ¿æ¨¡å¼ï¼šå®šä¹‰ä¸€ä¸ªç®—æ³•ç»“æ„ï¼Œè€Œå°†ä¸€äº›æ­¥éª¤å»¶è¿Ÿåˆ°å­ç±»å®ç°ã€‚
- è§£é‡Šå™¨æ¨¡å¼ï¼šç»™å®šä¸€ä¸ªè¯­è¨€ï¼Œå®šä¹‰å®ƒçš„æ–‡æ³•çš„ä¸€ç§è¡¨ç¤ºï¼Œå¹¶å®šä¹‰ä¸€ä¸ªè§£é‡Šå™¨ã€‚
- ç­–ç•¥æ¨¡å¼ï¼šå®šä¹‰ä¸€ç³»åˆ—ç®—æ³•ï¼ŒæŠŠä»–ä»¬å°è£…èµ·æ¥ï¼Œå¹¶ä¸”ä½¿å®ƒä»¬å¯ä»¥ç›¸äº’æ›¿æ¢ã€‚
- çŠ¶æ€æ¨¡å¼ï¼šå…è®¸ä¸€ä¸ªå¯¹è±¡åœ¨å…¶å¯¹è±¡å†…éƒ¨çŠ¶æ€æ”¹å˜æ—¶æ”¹å˜å®ƒçš„è¡Œä¸ºã€‚
- è§‚å¯Ÿè€…æ¨¡å¼ï¼šå¯¹è±¡é—´çš„ä¸€å¯¹å¤šçš„ä¾èµ–å…³ç³»ã€‚
- å¤‡å¿˜å½•æ¨¡å¼ï¼šåœ¨ä¸ç ´åå°è£…çš„å‰æä¸‹ï¼Œä¿æŒå¯¹è±¡çš„å†…éƒ¨çŠ¶æ€ã€‚
- ä¸­ä»‹è€…æ¨¡å¼ï¼šç”¨ä¸€ä¸ªä¸­ä»‹å¯¹è±¡æ¥å°è£…ä¸€ç³»åˆ—çš„å¯¹è±¡äº¤äº’ã€‚
- å‘½ä»¤æ¨¡å¼ï¼šå°†å‘½ä»¤è¯·æ±‚å°è£…ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œä½¿å¾—å¯ä»¥ç”¨ä¸åŒçš„è¯·æ±‚æ¥è¿›è¡Œå‚æ•°åŒ–ã€‚
- è®¿é—®è€…æ¨¡å¼ï¼šåœ¨ä¸æ”¹å˜æ•°æ®ç»“æ„çš„å‰æä¸‹ï¼Œå¢åŠ ä½œç”¨äºä¸€ç»„å¯¹è±¡å…ƒç´ çš„æ–°åŠŸèƒ½ã€‚
- è´£ä»»é“¾æ¨¡å¼ï¼šå°†è¯·æ±‚çš„å‘é€è€…å’Œæ¥æ”¶è€…è§£è€¦ï¼Œä½¿çš„å¤šä¸ªå¯¹è±¡éƒ½æœ‰å¤„ç†è¿™ä¸ªè¯·æ±‚çš„æœºä¼šã€‚
- è¿­ä»£å™¨æ¨¡å¼ï¼šä¸€ç§éå†è®¿é—®èšåˆå¯¹è±¡ä¸­å„ä¸ªå…ƒç´ çš„æ–¹æ³•ï¼Œä¸æš´éœ²è¯¥å¯¹è±¡çš„å†…éƒ¨ç»“æ„ã€‚

# è®¾è®¡æ¨¡å¼è¯¦è§£

## å•ä¾‹æ¨¡å¼

æ‰€è°“çš„å•ä¾‹è®¾è®¡æŒ‡çš„æ˜¯ä¸€ä¸ªç±»åªå…è®¸äº§ç”Ÿä¸€ä¸ªå®ä¾‹åŒ–å¯¹è±¡ã€‚ 

æœ€å¥½ç†è§£çš„ä¸€ç§è®¾è®¡æ¨¡å¼ï¼Œåˆ†ä¸ºæ‡’æ±‰å¼å’Œé¥¿æ±‰å¼ã€‚

### é¥¿æ±‰å¼

ç±»äº§ç”Ÿæ—¶å°±å®ä¾‹åŒ–å¯¹è±¡ã€‚

```java
class Singleton {
    /**
     * åœ¨ç±»çš„å†…éƒ¨å¯ä»¥è®¿é—®ç§æœ‰ç»“æ„ï¼Œæ‰€ä»¥å¯ä»¥åœ¨ç±»çš„å†…éƒ¨äº§ç”Ÿå®ä¾‹åŒ–å¯¹è±¡
     */
    private static Singleton instance = new Singleton();
    /**
     * private å£°æ˜æ„é€ 
     */
    private Singleton() {

    }
    /**
     * è¿”å›å¯¹è±¡å®ä¾‹
     */
    public static Singleton getInstance() {
        return instance;
    }
}
```

### æ‡’æ±‰å¼

å½“ç¬¬ä¸€æ¬¡å»ä½¿ç”¨Singletonå¯¹è±¡çš„æ—¶å€™æ‰ä¼šä¸ºå…¶äº§ç”Ÿå®ä¾‹åŒ–å¯¹è±¡çš„æ“ä½œã€‚

```java
class Singleton {

    /**
     * å£°æ˜å˜é‡
     */
    private static volatile Singleton singleton = null;

    /**
     * ç§æœ‰æ„é€ æ–¹æ³•
     */
    private Singleton() {

    }

    /**
     * æä¾›å¯¹å¤–æ–¹æ³•
     * @return 
     */
    public static Singleton getInstance() {
        // è¿˜æœªå®ä¾‹åŒ–
        if (singleton == null) {
            synchronized (Singleton.class) {
                if (singleton == null) {
                    singleton = new Singleton();
                }
            }
        }
        return singleton;
    }
    
}
```

## å·¥å‚è®¾è®¡æ¨¡å¼

å·¥å‚æ¨¡å¼åˆ†ä¸ºå·¥å‚æ–¹æ³•æ¨¡å¼å’ŒæŠ½è±¡å·¥å‚æ¨¡å¼ã€‚

å·¥å‚æ–¹æ³•æ¨¡å¼
1. æ™®é€šå·¥å‚æ¨¡å¼ï¼šå°±æ˜¯å»ºç«‹ä¸€ä¸ªå·¥å‚ç±»ï¼Œå¯¹å®ç°äº†åŒä¸€æ¥å£çš„ä¸€äº›ç±»è¿›è¡Œå®ä¾‹çš„åˆ›å»ºã€‚ 
2. å¤šä¸ªå·¥å‚æ–¹æ³•æ¨¡å¼ï¼šæ˜¯å¯¹æ™®é€šå·¥å‚æ–¹æ³•æ¨¡å¼çš„æ”¹è¿›ï¼Œåœ¨æ™®é€šå·¥å‚æ–¹æ³•æ¨¡å¼ä¸­ï¼Œå¦‚æœä¼ é€’çš„å­—ç¬¦ä¸²å‡ºé”™ï¼Œåˆ™ä¸èƒ½æ­£ç¡®åˆ›å»ºå¯¹è±¡ï¼Œè€Œå¤šä¸ªå·¥å‚æ–¹æ³•æ¨¡å¼æ˜¯æä¾›å¤šä¸ªå·¥å‚æ–¹æ³•ï¼Œåˆ†åˆ«åˆ›å»ºå¯¹è±¡ã€‚ 
3. é™æ€å·¥å‚æ–¹æ³•æ¨¡å¼ï¼šå°†ä¸Šé¢çš„å¤šä¸ªå·¥å‚æ–¹æ³•æ¨¡å¼é‡Œçš„æ–¹æ³•ç½®ä¸ºé™æ€çš„ï¼Œä¸éœ€è¦åˆ›å»ºå®ä¾‹ï¼Œç›´æ¥è°ƒç”¨å³å¯ã€‚

### æ™®é€šå·¥å‚æ¨¡å¼

å»ºç«‹ä¸€ä¸ªå·¥å‚ç±»ï¼Œå¯¹å®ç°äº†åŒä¸€æ¥å£çš„ä¸€äº›ç±»è¿›è¡Œå®ä¾‹çš„åˆ›å»ºã€‚

```java
interface Sender {
    void Send();
}

class MailSender implements Sender {

    @Override
    public void Send() {
        System.out.println("This is mail sender...");
    }
}

class SmsSender implements Sender {

    @Override
    public void Send() {
        System.out.println("This is sms sender...");
    }
}

public class FactoryPattern {
    public static void main(String[] args) {
        Sender sender = produce("mail");
        sender.Send();
    }
    public static Sender produce(String str) {
        if ("mail".equals(str)) {
            return new MailSender();
        } else if ("sms".equals(str)) {
            return new SmsSender();
        } else {
            System.out.println("è¾“å…¥é”™è¯¯...");
            return null;
        }
    }
}
```

### å¤šä¸ªå·¥å‚æ–¹æ³•æ¨¡å¼

è¯¥æ¨¡å¼æ˜¯å¯¹æ™®é€šå·¥å‚æ–¹æ³•æ¨¡å¼çš„æ”¹è¿›ï¼Œåœ¨æ™®é€šå·¥å‚æ–¹æ³•æ¨¡å¼ä¸­ï¼Œå¦‚æœä¼ é€’çš„å­—ç¬¦ä¸²å‡ºé”™ï¼Œåˆ™ä¸èƒ½æ­£ç¡®åˆ›å»ºå¯¹è±¡ï¼Œè€Œå¤šä¸ªå·¥å‚æ–¹æ³•æ¨¡å¼æ˜¯æä¾›å¤šä¸ªå·¥å‚æ–¹æ³•ï¼Œåˆ†åˆ«åˆ›å»ºå¯¹è±¡ã€‚

```java
interface Sender {
    void Send();
}

class MailSender implements Sender {

    @Override
    public void Send() {
        System.out.println("This is mail sender...");
    }
}

class SmsSender implements Sender {

    @Override
    public void Send() {
        System.out.println("This is sms sender...");
    }
}

class SendFactory {
    public Sender produceMail() {
        return new MailSender();
    }

    public Sender produceSms() {
        return new SmsSender();
    }
}

public class FactoryPattern {
    public static void main(String[] args) {
        SendFactory factory = new SendFactory();
        Sender sender = factory.produceMail();
        sender.Send();
    }
}
```

### é™æ€å·¥å‚æ–¹æ³•æ¨¡å¼

å°†ä¸Šé¢çš„å¤šä¸ªå·¥å‚æ–¹æ³•æ¨¡å¼é‡Œçš„æ–¹æ³•ç½®ä¸ºé™æ€çš„ï¼Œä¸éœ€è¦åˆ›å»ºå®ä¾‹ï¼Œç›´æ¥è°ƒç”¨å³å¯ã€‚

```java
interface Sender {
    void Send();
}

class MailSender implements Sender {

    @Override
    public void Send() {
        System.out.println("This is mail sender...");
    }
}

class SmsSender implements Sender {

    @Override
    public void Send() {
        System.out.println("This is sms sender...");
    }
}

class SendFactory {
    public static Sender produceMail() {
        return new MailSender();
    }

    public static Sender produceSms() {
        return new SmsSender();
    }
}

public class FactoryPattern {
    public static void main(String[] args) {
        Sender sender = SendFactory.produceMail();
        sender.Send();
    }
}
```

### æŠ½è±¡å·¥å‚æ¨¡å¼

å·¥å‚æ–¹æ³•æ¨¡å¼æœ‰ä¸€ä¸ªé—®é¢˜å°±æ˜¯ï¼Œç±»çš„åˆ›å»ºä¾èµ–å·¥å‚ç±»ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæƒ³è¦æ‰©å±•ç¨‹åºï¼Œå¿…é¡»å¯¹å·¥å‚ç±»è¿›è¡Œä¿®æ”¹ï¼Œè¿™è¿èƒŒäº†é—­åŒ…åŸåˆ™ï¼Œæ‰€ä»¥ï¼Œä»è®¾è®¡è§’åº¦è€ƒè™‘ï¼Œæœ‰ä¸€å®šçš„é—®é¢˜ï¼Œå¦‚ä½•è§£å†³ï¼Ÿ 

é‚£ä¹ˆè¿™å°±ç”¨åˆ°äº†æŠ½è±¡å·¥å‚æ¨¡å¼ï¼Œåˆ›å»ºå¤šä¸ªå·¥å‚ç±»ï¼Œè¿™æ ·ä¸€æ—¦éœ€è¦å¢åŠ æ–°çš„åŠŸèƒ½ï¼Œç›´æ¥å¢åŠ æ–°çš„å·¥å‚ç±»å°±å¯ä»¥äº†ï¼Œä¸éœ€è¦ä¿®æ”¹ä¹‹å‰çš„ä»£ç ã€‚

```java
interface Provider {
    Sender produce();
}

interface Sender {
    void Send();
}

class MailSender implements Sender {

    public void Send() {
        System.out.println("This is mail sender...");
    }
}

class SmsSender implements Sender {

    public void Send() {
        System.out.println("This is sms sender...");
    }
}

class SendMailFactory implements Provider {

    public Sender produce() {
        return new MailSender();
    }
}

class SendSmsFactory implements Provider {

    public Sender produce() {
        return new SmsSender();
    }
}


public class FactoryPattern {
    public static void main(String[] args) {
        Provider provider = new SendMailFactory();
        Sender sender = provider.produce();
        sender.Send();
    }
}
```

### å»ºé€ è€…æ¨¡å¼

å·¥å‚ç±»æ¨¡å¼æä¾›çš„æ˜¯åˆ›å»ºå•ä¸ªç±»çš„æ¨¡å¼ï¼Œè€Œå»ºé€ è€…æ¨¡å¼åˆ™æ˜¯å°†å„ç§äº§å“é›†ä¸­èµ·æ¥ç®¡ç†ï¼Œç”¨æ¥åˆ›å»ºå¤åˆå¯¹è±¡ï¼Œæ‰€è°“å¤åˆå¯¹è±¡å°±æ˜¯æŒ‡æŸä¸ªç±»å…·æœ‰ä¸åŒçš„å±æ€§ã€‚

```java
import java.util.ArrayList;
import java.util.List;

abstract class Builder {
    /**
     * ç¬¬ä¸€æ­¥ï¼šè£…CPU
     */
   public abstract void buildCPU();

    /**
     * ç¬¬äºŒæ­¥ï¼šè£…ä¸»æ¿
     */
    public abstract void buildMainBoard();

    /**
     * ç¬¬ä¸‰æ­¥ï¼šè£…ç¡¬ç›˜
     */
    public abstract void buildHD();

    /**
     * è·å¾—ç»„è£…å¥½çš„ç”µè„‘
     * @return
     */
    public abstract Computer getComputer();
}

/**
 * è£…æœºäººå‘˜è£…æœº
 */
class Director {
    public void Construct(Builder builder) {
        builder.buildCPU();
        builder.buildMainBoard();
        builder.buildHD();
    }
}

/**
 * å…·ä½“çš„è£…æœºäººå‘˜
 */
class ConcreteBuilder extends  Builder {

    Computer computer = new Computer();

    @Override
    public void buildCPU() {
        computer.Add("è£…CPU");
    }

    @Override
    public void buildMainBoard() {
        computer.Add("è£…ä¸»æ¿");
    }

    @Override
    public void buildHD() {
        computer.Add("è£…ç¡¬ç›˜");
    }

    @Override
    public Computer getComputer() {
        return computer;
    }
}

class Computer {

    /**
     * ç”µè„‘ç»„ä»¶é›†åˆ
     */
    private List<String> parts = new ArrayList<String>();

    public void Add(String part) {
        parts.add(part);
    }

    public void print() {
        for (int i = 0; i < parts.size(); i++) {
            System.out.println("ç»„ä»¶:" + parts.get(i) + "è£…å¥½äº†...");
        }
        System.out.println("ç”µè„‘ç»„è£…å®Œæ¯•...");
    }
}

public class BuilderPattern {

    public static void main(String[] args) {
        Director director = new Director();
        Builder builder = new ConcreteBuilder();
        director.Construct(builder);
        Computer computer = builder.getComputer();
        computer.print();
    }
}
```

## é€‚é…å™¨è®¾è®¡æ¨¡å¼

é€‚é…å™¨æ¨¡å¼æ˜¯å°†æŸä¸ªç±»çš„æ¥å£è½¬æ¢æˆå®¢æˆ·ç«¯æœŸæœ›çš„å¦ä¸€ä¸ªæ¥å£è¡¨ç¤ºï¼Œç›®çš„æ˜¯æ¶ˆé™¤ç”±äºæ¥å£ä¸åŒ¹é…æ‰€é€ æˆçš„çš„ç±»çš„å…¼å®¹æ€§é—®é¢˜ã€‚

ä¸»è¦åˆ†ä¸‰ç±»ï¼šç±»çš„é€‚é…å™¨æ¨¡å¼ã€å¯¹è±¡çš„é€‚é…å™¨æ¨¡å¼ã€æ¥å£çš„é€‚é…å™¨æ¨¡å¼ã€‚

### ç±»çš„é€‚é…å™¨æ¨¡å¼

```java
// æ—§çš„æ’­æ”¾å™¨ï¼ˆåªæ”¯æŒ MP3ï¼‰
class OldMediaPlayer {
    public void playMP3(String filename) {
        System.out.println("Playing MP3 file: " + filename);
    }
}

// æ–°çš„æ’­æ”¾å™¨æ¥å£ï¼ˆæ”¯æŒ MP4ï¼‰
interface NewMediaPlayer {
    void playMP4(String filename);
}

// ****é€‚é…å™¨ï¼ˆç»§æ‰¿æ—§æ’­æ”¾å™¨ï¼ŒåŒæ—¶é€‚é…æ–°æ¥å£ï¼‰****
class ClassAdapter extends OldMediaPlayer implements NewMediaPlayer {
    @Override
    public void playMP4(String filename) {
        System.out.println("Converting MP4 to MP3...");
        playMP3(filename); // å¤ç”¨æ—§ MP3 æ’­æ”¾åŠŸèƒ½
    }
}

// æµ‹è¯•
public class ClassAdapterTest {
    public static void main(String[] args) {
        NewMediaPlayer player = new ClassAdapter();
        player.playMP4("video.mp4");
    }
}
```

### å¯¹è±¡çš„é€‚é…å™¨æ¨¡å¼

```java
// æ—§çš„æ’­æ”¾å™¨ï¼ˆåªæ”¯æŒ MP3ï¼‰
class OldMediaPlayer {
    public void playMP3(String filename) {
        System.out.println("Playing MP3 file: " + filename);
    }
}

// æ–°çš„æ’­æ”¾å™¨æ¥å£ï¼ˆæ”¯æŒ MP4ï¼‰
interface NewMediaPlayer {
    void playMP4(String filename);
}

// ****é€‚é…å™¨ï¼ˆæŒæœ‰ OldMediaPlayer å¯¹è±¡ï¼‰****
class ObjectAdapter implements NewMediaPlayer {
    private OldMediaPlayer oldPlayer;

    public ObjectAdapter(OldMediaPlayer oldPlayer) {
        this.oldPlayer = oldPlayer;
    }

    @Override
    public void playMP4(String filename) {
        System.out.println("Converting MP4 to MP3...");
        oldPlayer.playMP3(filename); // å¤ç”¨æ—§ MP3 æ’­æ”¾åŠŸèƒ½
    }
}

// æµ‹è¯•
public class ObjectAdapterTest {
    public static void main(String[] args) {
        OldMediaPlayer oldPlayer = new OldMediaPlayer();
        NewMediaPlayer player = new ObjectAdapter(oldPlayer);
        player.playMP4("video.mp4");
    }
}
```

### æ¥å£çš„é€‚é…å™¨æ¨¡å¼

æ¥å£çš„é€‚é…å™¨æ˜¯è¿™æ ·çš„ï¼šæœ‰æ—¶æˆ‘ä»¬å†™çš„ä¸€ä¸ªæ¥å£ä¸­æœ‰å¤šä¸ªæŠ½è±¡æ–¹æ³•ï¼Œå½“æˆ‘ä»¬å†™è¯¥æ¥å£çš„å®ç°ç±»æ—¶ï¼Œå¿…é¡»å®ç°è¯¥æ¥å£çš„æ‰€æœ‰æ–¹æ³•ï¼Œè¿™æ˜æ˜¾æœ‰æ—¶æ¯”è¾ƒæµªè´¹ï¼Œå› ä¸ºå¹¶ä¸æ˜¯æ‰€æœ‰çš„æ–¹æ³•éƒ½æ˜¯æˆ‘ä»¬éœ€è¦çš„ï¼Œæœ‰æ—¶åªéœ€è¦æŸä¸€äº›ï¼Œæ­¤å¤„ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¼•å…¥äº†æ¥å£çš„é€‚é…å™¨æ¨¡å¼ï¼Œå€ŸåŠ©äºä¸€ä¸ªæŠ½è±¡ç±»ï¼Œè¯¥æŠ½è±¡ç±»å®ç°äº†è¯¥æ¥å£ï¼Œå®ç°äº†æ‰€æœ‰çš„æ–¹æ³•ï¼Œè€Œæˆ‘ä»¬ä¸å’ŒåŸå§‹çš„æ¥å£æ‰“äº¤é“ï¼Œåªå’Œè¯¥æŠ½è±¡ç±»å–å¾—è”ç³»ï¼Œæ‰€ä»¥æˆ‘ä»¬å†™ä¸€ä¸ªç±»ï¼Œç»§æ‰¿è¯¥æŠ½è±¡ç±»ï¼Œé‡å†™æˆ‘ä»¬éœ€è¦çš„æ–¹æ³•å°±è¡Œã€‚

```java
/**
 * å®šä¹‰ç«¯å£æ¥å£ï¼Œæä¾›é€šä¿¡æœåŠ¡
 */
interface Port {
    /**
     * è¿œç¨‹SSHç«¯å£ä¸º22
     */
    void SSH();

    /**
     * ç½‘ç»œç«¯å£ä¸º80
     */
    void NET();

    /**
     * Tomcatå®¹å™¨ç«¯å£ä¸º8080
     */
    void Tomcat();

    /**
     * MySQLæ•°æ®åº“ç«¯å£ä¸º3306
     */
    void MySQL();
}

/**
 * **** å®šä¹‰æŠ½è±¡ç±»å®ç°ç«¯å£æ¥å£ï¼Œä½†æ˜¯ä»€ä¹ˆäº‹æƒ…éƒ½ä¸åš ****
 */
abstract class Wrapper implements Port {
    @Override
    public void SSH() {

    }

    @Override
    public void NET() {

    }

    @Override
    public void Tomcat() {

    }

    @Override
    public void MySQL() {

    }
}

/**
 * æä¾›èŠå¤©æœåŠ¡
 * éœ€è¦ç½‘ç»œåŠŸèƒ½
 */
class Chat extends Wrapper {
    @Override
    public void NET() {
        System.out.println("Hello World...");
    }
}

/**
 * ç½‘ç«™æœåŠ¡å™¨
 * éœ€è¦Tomcatå®¹å™¨ï¼ŒMysqlæ•°æ®åº“ï¼Œç½‘ç»œæœåŠ¡ï¼Œè¿œç¨‹æœåŠ¡
 */
class Server extends Wrapper {
    @Override
    public void SSH() {
        System.out.println("Connect success...");
    }

    @Override
    public void NET() {
        System.out.println("WWW...");
    }

    @Override
    public void Tomcat() {
        System.out.println("Tomcat is running...");
    }

    @Override
    public void MySQL() {
        System.out.println("MySQL is running...");
    }
}

public class AdapterPattern {

    private static Port chatPort = new Chat();
    private static Port serverPort = new Server();

    public static void main(String[] args) {
        // èŠå¤©æœåŠ¡(é€‰æ‹©å®ç°ä¸€ä¸ªæ–¹æ³•)
        chatPort.NET();

        // æœåŠ¡å™¨(é€‰æ‹©å®ç°æ‰€æœ‰æ–¹æ³•)
        serverPort.SSH();
        serverPort.NET();
        serverPort.Tomcat();
        serverPort.MySQL();
    }
} 
```

### è£…é¥°æ¨¡å¼

é¡¾åæ€ä¹‰ï¼Œè£…é¥°æ¨¡å¼å°±æ˜¯ç»™ä¸€ä¸ªå¯¹è±¡å¢åŠ ä¸€äº›æ–°çš„åŠŸèƒ½ï¼Œè€Œä¸”æ˜¯åŠ¨æ€çš„ï¼Œè¦æ±‚è£…é¥°å¯¹è±¡å’Œè¢«è£…é¥°å¯¹è±¡å®ç°åŒä¸€ä¸ªæ¥å£ï¼Œè£…é¥°å¯¹è±¡æŒæœ‰è¢«è£…é¥°å¯¹è±¡çš„å®ä¾‹ã€‚

```java
interface Shape {
    void draw();
}

/**
 * å®ç°æ¥å£çš„å®ä½“ç±»
 */
class Rectangle implements Shape {

    @Override
    public void draw() {
        System.out.println("Shape: Rectangle...");
    }
}

class Circle implements Shape {

    @Override
    public void draw() {
        System.out.println("Shape: Circle...");
    }
}

/**
 * åˆ›å»ºå®ç°äº† Shape æ¥å£çš„æŠ½è±¡è£…é¥°ç±»ã€‚
 */
abstract class ShapeDecorator implements Shape {
    protected Shape decoratedShape;

    public ShapeDecorator(Shape decoratedShape) {
        this.decoratedShape = decoratedShape;
    }

    @Override
    public void draw() {
        decoratedShape.draw();
    }
}

/**
 *  åˆ›å»ºæ‰©å±•è‡ª ShapeDecorator ç±»çš„å®ä½“è£…é¥°ç±»ã€‚
 */
class RedShapeDecorator extends ShapeDecorator {

    public RedShapeDecorator(Shape decoratedShape) {
        super(decoratedShape);
    }

    @Override
    public void draw() {
        decoratedShape.draw();
        setRedBorder(decoratedShape);
    }

    private void setRedBorder(Shape decoratedShape) {
        System.out.println("Border Color: Red");
    }
}

/**
 * ä½¿ç”¨ RedShapeDecorator æ¥è£…é¥° Shape å¯¹è±¡ã€‚
 */
public class DecoratorPattern {
    public static void main(String[] args) {
        Shape circle = new Circle();
        Shape redCircle = new RedShapeDecorator(new Circle());
        Shape redRectangle = new RedShapeDecorator(new Rectangle());
        System.out.println("Circle with normal border");
        circle.draw();

        System.out.println("\nCircle of red border");
        redCircle.draw();

        System.out.println("\nRectangle of red border");
        redRectangle.draw();
    }
}
```

### ç­–ç•¥æ¨¡å¼

ç­–ç•¥æ¨¡å¼å®šä¹‰äº†ä¸€ç³»åˆ—ç®—æ³•ï¼Œå¹¶å°†æ¯ä¸ªç®—æ³•å°è£…èµ·æ¥ï¼Œä½¿ä»–ä»¬å¯ä»¥ç›¸äº’æ›¿æ¢ï¼Œä¸”ç®—æ³•çš„å˜åŒ–ä¸ä¼šå½±å“åˆ°ä½¿ç”¨ç®—æ³•çš„å®¢æˆ·ã€‚éœ€è¦è®¾è®¡ä¸€ä¸ªæ¥å£ï¼Œä¸ºä¸€ç³»åˆ—å®ç°ç±»æä¾›ç»Ÿä¸€çš„æ–¹æ³•ï¼Œå¤šä¸ªå®ç°ç±»å®ç°è¯¥æ¥å£ï¼Œè®¾è®¡ä¸€ä¸ªæŠ½è±¡ç±»ï¼ˆå¯æœ‰å¯æ— ï¼Œå±äºè¾…åŠ©ç±»ï¼‰ï¼Œæä¾›è¾…åŠ©å‡½æ•°ã€‚ç­–ç•¥æ¨¡å¼çš„å†³å®šæƒåœ¨ç”¨æˆ·ï¼Œç³»ç»Ÿæœ¬èº«æä¾›ä¸åŒç®—æ³•çš„å®ç°ï¼Œæ–°å¢æˆ–è€…åˆ é™¤ç®—æ³•ï¼Œå¯¹å„ç§ç®—æ³•åšå°è£…ã€‚å› æ­¤ï¼Œç­–ç•¥æ¨¡å¼å¤šç”¨åœ¨ç®—æ³•å†³ç­–ç³»ç»Ÿä¸­ï¼Œå¤–éƒ¨ç”¨æˆ·åªéœ€è¦å†³å®šç”¨å“ªä¸ªç®—æ³•å³å¯ã€‚

```java
/**
 * æŠ½è±¡ç®—æ³•çš„ç­–ç•¥ç±»ï¼Œå®šä¹‰æ‰€æœ‰æ”¯æŒçš„ç®—æ³•çš„å…¬å…±æ¥å£
 */
abstract class Strategy {
    /**
     * ç®—æ³•æ–¹æ³•
     */
    public abstract void AlgorithmInterface();
}

/**
 * å…·ä½“ç®—æ³•A
 */
class ConcreteStrategyA extends Strategy {
    //ç®—æ³•Aå®ç°æ–¹æ³•
    @Override
    public void AlgorithmInterface() {
        System.out.println("ç®—æ³•Açš„å®ç°");
    }
}

/**
 * å…·ä½“ç®—æ³•B
 */
class ConcreteStrategyB extends Strategy {
    /**
     * ç®—æ³•Bå®ç°æ–¹æ³•
     */
    @Override
    public void AlgorithmInterface() {
        System.out.println("ç®—æ³•Bçš„å®ç°");
    }
}

/**
 * å…·ä½“ç®—æ³•C
 */
class ConcreteStrategyC extends Strategy {
    @Override
    public void AlgorithmInterface() {
        System.out.println("ç®—æ³•Cçš„å®ç°");
    }
}

/**
 * ä¸Šä¸‹æ–‡ï¼Œç»´æŠ¤ä¸€ä¸ªå¯¹ç­–ç•¥ç±»å¯¹è±¡çš„å¼•ç”¨
 */
class Context {
    Strategy strategy;

    public Context(Strategy strategy) {
        this.strategy = strategy;
    }

    public void contextInterface(){
        strategy.AlgorithmInterface();
    }
}

/**
 * å®¢æˆ·ç«¯ä»£ç ï¼šå®ç°ä¸åŒçš„ç­–ç•¥
 */
public class StrategyPattern {
    public static void main(String[] args) {

        Context context;

        context = new Context(new ConcreteStrategyA());
        context.contextInterface();

        context = new Context(new ConcreteStrategyB());
        context.contextInterface();

        context = new Context(new ConcreteStrategyC());
        context.contextInterface();
    }
}
```

### ä»£ç†æ¨¡å¼

ä»£ç†æ¨¡å¼æŒ‡ç»™ä¸€ä¸ªå¯¹è±¡æä¾›ä¸€ä¸ªä»£ç†å¯¹è±¡ï¼Œå¹¶ç”±ä»£ç†å¯¹è±¡æ§åˆ¶å¯¹åŸå¯¹è±¡çš„å¼•ç”¨ã€‚ä»£ç†å¯ä»¥åˆ†ä¸ºé™æ€ä»£ç†å’ŒåŠ¨æ€ä»£ç†ã€‚é€šè¿‡ä»£ç†æ¨¡å¼ï¼Œå¯ä»¥åˆ©ç”¨ä»£ç†å¯¹è±¡ä¸ºè¢«ä»£ç†å¯¹è±¡æ·»åŠ é¢å¤–çš„åŠŸèƒ½ï¼Œä»¥æ­¤æ¥æ‹“å±•è¢«ä»£ç†å¯¹è±¡çš„åŠŸèƒ½ã€‚å¯ä»¥ç”¨äºè®¡ç®—æŸä¸ªæ–¹æ³•æ‰§è¡Œæ—¶é—´ï¼Œåœ¨æŸä¸ªæ–¹æ³•æ‰§è¡Œå‰åè®°å½•æ—¥å¿—ç­‰æ“ä½œã€‚

#### é™æ€ä»£ç†

é™æ€ä»£ç†éœ€è¦æˆ‘ä»¬å†™å‡ºä»£ç†ç±»å’Œè¢«ä»£ç†ç±»ï¼Œè€Œä¸”ä¸€ä¸ªä»£ç†ç±»å’Œä¸€ä¸ªè¢«ä»£ç†ç±»ä¸€ä¸€å¯¹åº”ã€‚ä»£ç†ç±»å’Œè¢«ä»£ç†ç±»éœ€è¦å®ç°åŒä¸€ä¸ªæ¥å£ï¼Œé€šè¿‡èšåˆä½¿å¾—ä»£ç†å¯¹è±¡ä¸­æœ‰è¢«ä»£ç†å¯¹è±¡çš„å¼•ç”¨ï¼Œä»¥æ­¤å®ç°ä»£ç†å¯¹è±¡æ§åˆ¶è¢«ä»£ç†å¯¹è±¡çš„ç›®çš„ã€‚

å¸¸è§åº”ç”¨åœºæ™¯ï¼š

ğŸ”¹ **æ—¥å¿—è®°å½•**ï¼šåœ¨æ–¹æ³•æ‰§è¡Œå‰åè®°å½•æ—¥å¿—
ğŸ”¹ **æƒé™æ§åˆ¶**ï¼šåœ¨æ–¹æ³•æ‰§è¡Œå‰æ£€æŸ¥ç”¨æˆ·æƒé™
ğŸ”¹ **è¿œç¨‹ä»£ç†ï¼ˆRPCï¼‰**ï¼šè°ƒç”¨è¿œç¨‹æ–¹æ³•æ—¶ï¼Œé€šè¿‡ä»£ç†å°è£…åº•å±‚ç½‘ç»œé€šä¿¡
ğŸ”¹ **äº‹åŠ¡ç®¡ç†**ï¼šåœ¨æ–¹æ³•æ‰§è¡Œå‰åå¼€å¯/æäº¤äº‹åŠ¡
ğŸ”¹ **åŠ¨æ€ä»£ç†ï¼ˆSpring AOPï¼‰**ï¼šSpring ä½¿ç”¨åŠ¨æ€ä»£ç†å®ç° AOPï¼ˆé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰

```java
// å®šä¹‰æœåŠ¡æ¥å£
interface IService {
    void service();
}

// å®é™…ä¸šåŠ¡é€»è¾‘ç±»
class Service implements IService {
    @Override
    public void service() {
        System.out.println("æ‰§è¡Œæ ¸å¿ƒä¸šåŠ¡æ“ä½œ...");
    }
}

// ä»£ç†ç±»ï¼ˆå¢åŠ æ—¥å¿—è®°å½•åŠŸèƒ½ï¼‰
class LoggingProxyService implements IService {
    private IService service;

    public LoggingProxyService(IService service) {
        this.service = service;
    }

    @Override
    public void service() {
        // æ–¹æ³•æ‰§è¡Œå‰è®°å½•æ—¥å¿—
        System.out.println("å¼€å§‹æ‰§è¡Œ service æ–¹æ³•...");
        service.service(); // è°ƒç”¨è¢«ä»£ç†ç±»çš„ä¸šåŠ¡é€»è¾‘
        // æ–¹æ³•æ‰§è¡Œåè®°å½•æ—¥å¿—
        System.out.println("æ‰§è¡Œ service æ–¹æ³•å®Œæˆ...");
    }
}

// æµ‹è¯•
public class ProxyPatternTest {
    public static void main(String[] args) {
        IService service = new Service();
        IService proxyService = new LoggingProxyService(service);
        proxyService.service();
    }
}
```

#### åŠ¨æ€ä»£ç†

JDK 1.3 ä¹‹åï¼ŒJavaé€šè¿‡java.lang.reflectåŒ…ä¸­çš„ä¸‰ä¸ªç±»Proxyã€InvocationHandlerã€Methodæ¥æ”¯æŒåŠ¨æ€ä»£ç†ã€‚åŠ¨æ€ä»£ç†å¸¸ç”¨äºæœ‰è‹¥å¹²ä¸ªè¢«ä»£ç†çš„å¯¹è±¡ï¼Œä¸”ä¸ºæ¯ä¸ªè¢«ä»£ç†å¯¹è±¡æ·»åŠ çš„åŠŸèƒ½æ˜¯ç›¸åŒçš„ï¼ˆä¾‹å¦‚åœ¨æ¯ä¸ªæ–¹æ³•è¿è¡Œå‰åè®°å½•æ—¥å¿—ï¼‰ã€‚åŠ¨æ€ä»£ç†çš„ä»£ç†ç±»ä¸éœ€è¦æˆ‘ä»¬ç¼–å†™ï¼Œç”±Javaè‡ªåŠ¨äº§ç”Ÿä»£ç†ç±»æºä»£ç å¹¶è¿›è¡Œç¼–è¯‘æœ€åç”Ÿæˆä»£ç†å¯¹è±¡ã€‚ 

åˆ›å»ºåŠ¨æ€ä»£ç†å¯¹è±¡çš„æ­¥éª¤ï¼š 

1ï¼‰æŒ‡æ˜ä¸€ç³»åˆ—çš„æ¥å£æ¥åˆ›å»ºä¸€ä¸ªä»£ç†å¯¹è±¡ 

2ï¼‰åˆ›å»ºä¸€ä¸ªè°ƒç”¨å¤„ç†å™¨ï¼ˆInvocationHandlerï¼‰å¯¹è±¡ 

3ï¼‰å°†è¿™ä¸ªä»£ç†æŒ‡å®šä¸ºæŸä¸ªå…¶ä»–å¯¹è±¡çš„ä»£ç†å¯¹è±¡ 

4ï¼‰ åœ¨è°ƒç”¨å¤„ç†å™¨çš„invokeï¼ˆï¼‰æ–¹æ³•ä¸­é‡‡å–ä»£ç†ï¼Œä¸€æ–¹é¢å°†è°ƒç”¨ä¼ é€’ç»™çœŸå®å¯¹è±¡ï¼Œå¦ä¸€æ–¹é¢æ‰§è¡Œå„ç§éœ€è¦çš„æ“ä½œ

```java
import java.lang.reflect.InvocationHandler;
import java.lang.reflect.Method;
import java.lang.reflect.Proxy;

// æœåŠ¡æ¥å£
interface IService {
    void service();
}

// å®é™…çš„æœåŠ¡ç±»
class Service implements IService {
    @Override
    public void service() {
        System.out.println("æ‰§è¡Œæ ¸å¿ƒä¸šåŠ¡é€»è¾‘...");
    }
}

// åŠ¨æ€ä»£ç†ç±»ï¼Œç”¨äºè®°å½•æ—¥å¿—
class LoggingInvocationHandler implements InvocationHandler {
    private Object target;

    public LoggingInvocationHandler(Object target) {
        this.target = target;
    }

    @Override
    public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {
        // åœ¨æ–¹æ³•æ‰§è¡Œå‰è®°å½•æ—¥å¿—
        System.out.println("å¼€å§‹æ‰§è¡Œæ–¹æ³•ï¼š" + method.getName());
        // è°ƒç”¨åŸæ–¹æ³•
        Object result = method.invoke(target, args);
        // åœ¨æ–¹æ³•æ‰§è¡Œåè®°å½•æ—¥å¿—
        System.out.println("æ–¹æ³•æ‰§è¡Œå®Œæ¯•ï¼š" + method.getName());
        return result;
    }
}

public class DynamicProxyExample {
    public static void main(String[] args) {
        IService service = new Service();
        
        // åˆ›å»ºåŠ¨æ€ä»£ç†
        IService proxyService = (IService) Proxy.newProxyInstance(
                service.getClass().getClassLoader(),
                service.getClass().getInterfaces(),
                new LoggingInvocationHandler(service)
        );
        
        // æ‰§è¡Œä»£ç†æ–¹æ³•
        proxyService.service();
    }
}
```

### æ¨¡æ¿æ–¹æ³•æ¨¡å¼

**æ¨¡æ¿æ–¹æ³•æ¨¡å¼**æ˜¯ä¸€ç§**è¡Œä¸ºè®¾è®¡æ¨¡å¼**ï¼Œå®ƒå®šä¹‰äº†ä¸€ä¸ªç®—æ³•çš„éª¨æ¶ï¼Œå°†æŸäº›æ­¥éª¤çš„å®ç°æ¨è¿Ÿåˆ°å­ç±»ä¸­ã€‚æ¨¡æ¿æ–¹æ³•æ¨¡å¼ä½¿å¾—å­ç±»å¯ä»¥åœ¨ä¸æ”¹å˜ç®—æ³•ç»“æ„çš„æƒ…å†µä¸‹ï¼Œ**é‡æ–°å®šä¹‰**ç®—æ³•çš„æŸäº›ç‰¹å®šæ­¥éª¤ã€‚

**æ ¸å¿ƒæ€æƒ³**ï¼š

- çˆ¶ç±»æä¾›ä¸€ä¸ª**æ¨¡æ¿æ–¹æ³•**ï¼Œåœ¨è¿™ä¸ªæ–¹æ³•ä¸­å®šä¹‰äº†ç®—æ³•çš„éª¨æ¶ï¼ˆå³ä¸€ç³»åˆ—æ­¥éª¤çš„æ‰§è¡Œé¡ºåºï¼‰ã€‚
- æŸäº›æ­¥éª¤åœ¨çˆ¶ç±»ä¸­å®ç°ï¼Œ**ä¸€äº›å…·ä½“çš„æ­¥éª¤åœ¨å­ç±»ä¸­å®ç°**ã€‚
- é€šè¿‡è¿™ç§æ–¹å¼ï¼Œçˆ¶ç±»å°†ç®—æ³•çš„æ‰§è¡Œé¡ºåºæ§åˆ¶ä½ï¼Œè€Œå­ç±»å¯ä»¥å®šåˆ¶å…·ä½“çš„ç»†èŠ‚ã€‚

**æ¨¡æ¿æ–¹æ³•æ¨¡å¼çš„ç»“æ„**

1. **æŠ½è±¡ç±»ï¼ˆAbstract Classï¼‰**ï¼š
   - å®šä¹‰äº†ä¸€ä¸ªæ¨¡æ¿æ–¹æ³•ï¼ˆ`templateMethod`ï¼‰ï¼Œå®ƒåŒ…å«äº†ç®—æ³•çš„éª¨æ¶ã€‚
   - å…¶ä¸­ä¸€äº›æ­¥éª¤å¯ä»¥ç”±å­ç±»å®ç°ï¼Œå…¶ä»–æ­¥éª¤åœ¨çˆ¶ç±»ä¸­å®ç°ã€‚
2. **å…·ä½“ç±»ï¼ˆConcrete Classï¼‰**ï¼š
   - å®ç°çˆ¶ç±»ä¸­å®šä¹‰çš„**æŠ½è±¡æ–¹æ³•**ï¼Œå¹¶åœ¨è¿™äº›æ–¹æ³•ä¸­å®šä¹‰å…·ä½“çš„æ­¥éª¤ã€‚

**ç¤ºä¾‹ï¼šåˆ¶ä½œå’–å•¡ä¸èŒ¶çš„è¿‡ç¨‹**

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œçˆ¶ç±» `CaffeineBeverage` å®šä¹‰äº†åˆ¶ä½œé¥®æ–™çš„åŸºæœ¬æµç¨‹ï¼ˆæ¨¡æ¿æ–¹æ³•ï¼‰ï¼Œè€Œ `Tea` å’Œ `Coffee` å­ç±»åˆ™å®ç°äº†å…·ä½“çš„æ­¥éª¤ï¼Œå¦‚**æ³¡èŒ¶**å’Œ**ç…®å’–å•¡**ã€‚

**1. æŠ½è±¡ç±» `CaffeineBeverage`**

```
javaå¤åˆ¶ç¼–è¾‘// å®šä¹‰ä¸€ä¸ªæŠ½è±¡ç±»ï¼ŒåŒ…å«æ¨¡æ¿æ–¹æ³•
abstract class CaffeineBeverage {

    // æ¨¡æ¿æ–¹æ³•ï¼Œå®šä¹‰äº†ä¸€ä¸ªé¥®æ–™çš„åˆ¶ä½œè¿‡ç¨‹
    public final void prepareRecipe() {
        boilWater();
        brew();
        pourInCup();
        addCondiments();
    }

    // å›ºå®šæ­¥éª¤ï¼šçƒ§æ°´
    private void boilWater() {
        System.out.println("Boiling water");
    }

    // æŠ½è±¡æ–¹æ³•ï¼šä¸åŒé¥®æ–™æœ‰ä¸åŒçš„å†²æ³¡æ–¹æ³•
    protected abstract void brew();

    // å›ºå®šæ­¥éª¤ï¼šå€’å…¥æ¯å­
    private void pourInCup() {
        System.out.println("Pouring into cup");
    }

    // æŠ½è±¡æ–¹æ³•ï¼šä¸åŒé¥®æ–™æœ‰ä¸åŒçš„è°ƒå‘³æ–¹æ³•
    protected abstract void addCondiments();
}
```

**2. å­ç±» `Tea`ï¼ˆå…·ä½“å®ç°ï¼šæ³¡èŒ¶ï¼‰**

```
javaå¤åˆ¶ç¼–è¾‘// å­ç±»ï¼šæ³¡èŒ¶
class Tea extends CaffeineBeverage {

    @Override
    protected void brew() {
        System.out.println("Steeping the tea");
    }

    @Override
    protected void addCondiments() {
        System.out.println("Adding lemon");
    }
}
```

**3. å­ç±» `Coffee`ï¼ˆå…·ä½“å®ç°ï¼šæ³¡å’–å•¡ï¼‰**

```
javaå¤åˆ¶ç¼–è¾‘// å­ç±»ï¼šç…®å’–å•¡
class Coffee extends CaffeineBeverage {

    @Override
    protected void brew() {
        System.out.println("Dripping coffee through filter");
    }

    @Override
    protected void addCondiments() {
        System.out.println("Adding sugar and milk");
    }
}
```

**4. å®¢æˆ·ç«¯ä»£ç ï¼ˆæµ‹è¯•ï¼‰**

```
javaå¤åˆ¶ç¼–è¾‘public class TemplateMethodPatternTest {
    public static void main(String[] args) {
        // åˆ›å»ºèŒ¶å’Œå’–å•¡å¯¹è±¡
        CaffeineBeverage tea = new Tea();
        CaffeineBeverage coffee = new Coffee();

        // è°ƒç”¨æ¨¡æ¿æ–¹æ³•ï¼Œåˆ¶ä½œèŒ¶å’Œå’–å•¡
        System.out.println("\nMaking tea:");
        tea.prepareRecipe();

        System.out.println("\nMaking coffee:");
        coffee.prepareRecipe();
    }
}
```

**è¿è¡Œç»“æœ**ï¼š

```
sqlå¤åˆ¶ç¼–è¾‘Making tea:
Boiling water
Steeping the tea
Pouring into cup
Adding lemon

Making coffee:
Boiling water
Dripping coffee through filter
Pouring into cup
Adding sugar and milk
```

